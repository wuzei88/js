[General]
ip-mode = v4-only
loglevel = info

[Proxy]
# 本地代理监听（供系统/浏览器绑定）
socks_local = socks5,127.0.0.1,1081,udp=true
http_local  = http,127.0.0.1,8080

# 伪装出站（HTTP over TLS，伪装为百度流量）
# 格式：name = 类型,服务器,端口,选项...
baidu_tunnel = http,153.3.236.22,443,tls=true,header=Host:153.3.236.22:443|X-T5-Auth:683556433|User-Agent:Mozilla/5.0 (Linux; Android) BaiduApp/12.0.0

# UDP 出站（将 UDP 通过 socks5 发出，以支持游戏语音等）
baidu_udp = socks5,153.3.236.22,443,udp=true

[DNS]
# 电信友好上游 DNS（首选电信常用 DNS + 备用阿里）
listen = 0.0.0.0:6653
upstream = 114.114.114.114:53,223.5.5.5:53
cache = true
cache-size = 128

[TUN]
enable = true
device = tun0
addr4 = 10.0.0.1/24
addr6 = fc00::1/64
mtu = 1500
route-all = true

[Routing]
# 默认走伪装通道（TCP/HTTP/TLS）
default = baidu_tunnel

# 明确把 UDP 流量走 baidu_udp
udp = baidu_udp

# 直连本地网段（避免内网流量走代理）
direct = 127.0.0.0/8,10.0.0.0/8,192.168.0.0/16

# 绕过常见 CDN / 国内大站（避免被错误代理）
bypass-domains = baidu.com,bdstatic.com,static.cdn

[Payload]
# 若 Egern/Loon 内核支持“首包伪装”可把相应 payload 放在这里（可选）
# http_init = GET / HTTP/1.1\r\nHost: 153.3.236.22:443\r\nConnection: keep-alive\r\n\r\n

[Script]
# 连接前注入 header（如果你的 Egern 支持 script hook）
# 伪代码示例，实际脚本格式请按 Egern 要求填写
# on_connect: set_header("X-T5-Auth","683556433"); set_header("Host","153.3.236.22:443")

[Notes]
# 1) baidu_tunnel/baidu_udp 中的 153.3.236.22 与 token(683556433) 为演示值，若你有不同服务端请替换。
# 2) 若 Egern 报某行语法错误，请把错误信息发给我（直接复制粘贴），我会基于错误逐行修复。